---
title: WP_optionsテーブルとサイト速度
url: https://woocommerce.com/document/wp_options-table-and-site-speed/
---

WordPressサイトの動作が遅い場合、`wp_options`テーブルが見落とされがちです。このテーブルには、パーマリンク、サイト設定、投稿スケジュール、ウィジェットの詳細など、サイトの重要なデータが保存されています。

[遅い WooCommerce サイトのトラブルシューティング](https://woocommerce.com/document/troubleshooting-a-slow-site/) の最も一般的な手順をすでに試している場合は、次のステップとして `wp_options` テーブルを確認することをお勧めします。

フロントエンドでも管理ダッシュボードでも、ほぼすべてのページで次のクエリが実行されます。

```
SELECT option_name, option_value FROM wp_options WHERE autoload = 'yes'
```

このクエリが最適化されていない場合、サイトの速度が低下する可能性があります。

**注:**このドキュメントは、高度なトラブルシューティングに役立つガイドとして提供されています。ただし、記載されている手順は[サポートポリシー](https://woocommerce.com/support-policy/)の対象外であり、実装に関する直接的なサポートは提供できません。資格のあるWordPress/WooCommerce開発者のサポートをご希望の場合は、[Codeable](https://codeable.io/?ref=z4Hnp)または[Woo Agency Partner](https://woocommerce.com/development-services/)を強くお勧めします。

WordPress の `wp_options` テーブルには、次のような重要な設定とサイトデータが保存されます。

- サイトのURL
- 有効な拡張機能とプラグイン
- ウィジェットの設定
- キャッシュされた情報

多くの拡張機能、プラグイン、テーマは設定を保存するために `wp_options` を使用するため、WordPress の操作において重要な部分となります。

WordPress では、**autoload** は `wp_options` テーブルの設定であり、特定のデータが各ページで自動的にロードされるかどうかを制御します。

オプションの*自動読み込み*が**はい**に設定されている場合、WordPressは**ページが読み込まれるたびに**このデータを取得します。これにより、頻繁に使用する設定へのアクセスが高速化されます。ただし、*自動読み込み*が有効になっているオプションが多すぎると、不要なデータが読み込まれ、サイトの速度が低下する可能性があります。

`wp_options` テーブルは大量のデータを処理するように設計されていないため、スケーリングに苦労します。特に拡張機能、プラグイン、テーマからのレコードが増えると、過負荷になる可能性があります。

*自動読み込み*設定はこの点で大きな役割を果たします。オプションの自動読み込みが**はい**に設定されている場合、WordPressはすべてのページごとにこのデータを読み込みます。自動読み込み対象としてマークされたデータが多すぎると、サイトの速度が低下する可能性があります。過剰なデータが常に読み込まれると**ページの読み込み時間が長くなり**、サイトの効率的なスケーリングが困難になります。

データベースインデックスは、`wp_posts` のようなテーブルにおけるデータ取得速度を向上させます。これは本の索引のように機能し、データベースがすべてのレコードを検索することなく、特定の情報を素早く見つけることを可能にします。`wp_posts` テーブルでは、`post_date` や `post_type` などのフィールドにインデックスを設定することで、WordPress は関連する投稿のみをより効率的に見つけて読み込むことができます。これらのインデックスがないと、データベースは各レコードを個別に調べる必要があり、特にテーブルが大きくなるとページの読み込み速度が低下する可能性があります。

`wp_options` テーブルは、デフォルトでは *autoload* フィールドにインデックスがありません。これは、`wp_options` が元々限られた数の設定のみを保存することを目的としていたためです。しかし、サイトが成長し、より多くのプラグインやテーマが `wp_options` にデータを保存するようになると、*autoload* にインデックスがないことでクエリが遅くなり、サイトのパフォーマンスに影響を与える可能性があります。

オブジェクトキャッシュは、各ページで `wp_options` テーブルからデータを読み込む必要性を減らすことで、サイトのパフォーマンス向上に役立ちます。オブジェクトキャッシュを有効にすると、WordPress は頻繁に使用される `wp_options` データを毎回データベースから取得するのではなく、メモリに保存します。これにより、**データベースの負荷が軽減** され、**ページの読み込み時間が短縮** されます。

オブジェクトキャッシュを設定するには、[Redis](https://redis.io/solutions/caching/) や [Memcached](https://www.memcached.org/) などのサードパーティ製キャッシュツールを使用し、選択したツールに対応する WordPress キャッシュプラグインをインストールします。インストール後、キャッシュツールを WordPress で動作するように設定する必要があります。通常は、サイトの `wp-config.php` ファイルに設定を追加するか、プラグインの設定を使用します。この設定により、WordPress は `wp_options` データを自動的にキャッシュしてメモリから取得できるようになり、サイト全体の速度が向上します。

サイトのキャッシュ設定方法がわからない場合は、ホスティングプロバイダーに問い合わせて設定方法をご確認ください。ホスティングプロバイダーはサイトのサーバー環境を把握しており、最適な設定方法をご提案いたします。

`wp_options` テーブルによるパフォーマンスの問題を防ぐには、次の推奨事項に従ってください。

- **テーブルサイズを監視する**: `wp_options` のサイズを定期的にチェックし、大きくなりすぎていないことを確認してください。理想的には 500 行未満です。保存されるデータが多すぎると、クエリの速度が低下する可能性があります。
- **適切なストレージを使用する**: 拡張機能、プラグイン、テーマ固有のデータは、`wp_options` ではなく、投稿固有の情報用の `wp_postmeta` など、より適切なテーブルに保存してください。
- **未使用のデータを削除する**: 特に拡張機能、プラグイン、テーマをアンインストールした後は、`wp_options` から古くなったオプションや未使用のオプションを削除して、テーブルをスリムに保ちましょう。

まだ質問があり、サポートが必要ですか?

- ヘルプデスクからハピネスエンジニアに[お問い合わせ](https://woocommerce.com/my-account/create-a-ticket/)ください。WooCommerce.comで開発または販売されている拡張機能、およびJetpack/WordPress.comをご利用のお客様には、サポートを提供しています。
- お客様でない場合は、[WooCommerceサポートフォーラム](https://wordpress.org/support/plugin/woocommerce/)でサポートを探すか、Wooエージェンシーパートナーにご依頼いただくことをお勧めします。これらのエージェンシーは、高度にカスタマイズされ、拡張性の高いオンラインストアの構築で実績のある信頼できるエージェンシーです。[Wooエージェンシーパートナーの詳細](https://woocommerce.com/development-services/)

