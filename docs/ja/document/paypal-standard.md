---
title: PayPalスタンダード
url: https://woocommerce.com/document/paypal-standard/
---

PayPal Standardをご利用のすべてのお客様には、フルスタックソリューション（クレジットカード処理、PayPalチェックアウト、サブスクリプション、後払いオプションなど）である**PayPal Payments拡張機能**のご利用を強くお勧めします。PayPal Standardのサポートは非​​常に限られており、トラブルシューティングを行っても報告された問題が解決しない場合は、PayPal Paymentsへの切り替えをお願いする場合があります。WooCommerceバージョン5.5.0以降、[PayPal Standardは新規インストールでは非表示](https://developer.woocommerce.com/2021/07/12/developer-advisory-paypal-standard-will-be-hidden-on-new-installs/)となっています。この変更は既存のストアには影響しません。

**PayPal Standard** は、顧客をお客様のサイトから PayPal の安全なサイトに移動させ、注文の支払いを完了させます。

- **PayPalビジネスアカウント**

paypal.com にアクセスして、PayPal **ビジネス** アカウントにご登録いただくか、既存の個人アカウントをビジネスアカウントに変更してください。無料です。

PayPal Standard を設定するには:

1. **WooCommerce > 設定 > 支払い** に移動します。
2. **有効** の下にあるトグルスイッチを使って PayPal を選択します。
3. **設定** を選択します。PayPal 標準設定に移動します。

1. PayPalのメールアドレス欄にメールアドレスを**入力**してください。これは、お支払いを受け取る前に設定する必要がある最も重要な項目です。PayPalビジネスアカウントに登録されているメールアドレスと一致している必要があります。「詳細オプション」で、必要に応じて項目を入力してください。

1. ストアの開発中にチェックアウトプロセスをテストする場合は、「**PayPal Sandbox を有効にする**」のボックスに**チェック**を入れてください。サンドボックスを有効にすると、支払い/代金は発生しません。サンドボックスモードを使用するには、[PayPal Sandbox](https://developer.paypal.com/) 経由で別のサンドボックスアカウントが必要です。
2. **デバッグログ** もオンにすることができます。これは開発中に役立ちます。最初に wc-logs フォルダを作成し、書き込み権限を設定する必要がある場合があります。これらのログは、**WooCommerce > システムステータス > ログ** で確認でき、ドロップダウンから PayPal ログを選択できます。
3. **IPN メール通知を有効にする** のボックスに**チェック**を入れてください (オプション)。支払いの受領、払い戻しの発行、チャージバックまたはキャンセル時に、PayPal からインスタント支払い通知 (IPN) が送信されます。
4. この欄に入力する受取人メールアドレスは、PayPal.com の設定ページ ([https://www.paypal.com/businessprofile/settings](https://www.paypal.com/businessprofile/settings)) に記載されている**プライマリメールアドレス**と同じである必要があります。
5. **PayPal アイデンティティトークン** (任意)。PayPal アカウントでデータ転送オプションにサインアップした場合にのみ必要です。IPN の問題が発生した場合、支払いの確認に使用できます。
6. **請求書プレフィックス** (複数のストアがある場合に便利です) を入力します。WC は WooCommerce の取引を示すデフォルトです。
7. 配送オプションは 2 つあります。
- **配送詳細を PayPal に送信**。WooCommerce から PayPal に配送詳細を送信し、請求書の代わりに配送ラベルを作成するように設定できます。
- **住所上書きオプション**。PayPal は住所を検証するため、この設定によってエラーが発生する可能性があります。無効にしておくことをお勧めしますが、住所情報の変更を防ぐのに役立ちます。
  

**注:** 配送先情報を送信するオプションを選択すると、PayPalは渡された住所を検証し、顧客が住所を完全に認識できない場合は、その取引を拒否することがあります。「配送先情報」チェックボックスがチェックされていない場合、PayPalのセラー保護制度が有効にならない可能性があります。これは、PayPalがセラー保護制度を利用するために購入者の配送先住所の入力を求めているためです。

1. **支払いアクション**では、資金をすぐに**キャプチャ**するか、**承認***のみ***するかを選択できます。**承認のみ***の注文が「処理中」または「完了」に変更されると、WooCommerce > 設定 > 支払い > PayPal で PayPal API 認証情報（下記の通り）を入力している限り、資金は自動的にキャプチャされます。WooCommerce 3.0 以降では、手動プロセスはなくなりました。*
2. ページスタイル（オプション）では、PayPal アカウントからカスタムページの名前を選択できます。
3. 画像URL（オプション）では、PayPalチェックアウトページに表示する 150×50 の画像を指定できます。

API 情報を貼り付けるフィールドは 3 つあります。

- APIユーザー名
- APIパスワード
- API署名

#### ライブAPI情報を取得する方法

1. [PayPal.com](https://www.paypal.com/) でPayPalアカウントにログインします。
2. [設定] (歯車アイコン) > [アカウント設定] > [APIアクセス](https://www.paypal.com/businessmanage/credentials/apiAccess) に移動します。
3. [**NVP/SOAP API統合 (Classic)**] > [API認証情報の管理] > [API署名のリクエスト] を選択します。
4. APIユーザー名、APIパスワード、API署名を表示してコピーします。

設定のほとんどは WooCommerce から処理されますが、PayPal で設定する項目がいくつかあります。

### PayPal IPN URL

WooCommerce では PayPal IPN URL を設定する必要があります。

[PayPal 即時支払い通知](https://www.paypal.com/ipn) (PayPal IPN) は、お支払いが成功したか失敗したかをストアに通知します。PayPal で IPN を設定する方法の詳細については、[PayPal アカウントで IPN を有効にする方法](https://developer.paypal.com/docs/api-basics/notifications/ipn/IPNSetup/#setting-up-ipn-notifications-on-paypal) をご覧ください。

#### PayPal IPNの設定方法

1. [PayPal.com](https://www.paypal.com/) でPayPalアカウントにログインします。
2. 「設定」（歯車アイコン）>「アカウント設定」>「通知」>「インスタントペイメント通知（更新）」に移動します。
3. 「**IPN設定を選択**」ボタンをクリックし、次のURLを使用します。「example.com」の部分は、ご自身のURLに置き換えてください。https://example.com/?wc-api=WC_Gateway_Paypal
4. 「**IPNメッセージを受信**」オプションが選択されていることを確認して保存します。

#### 複数の IPN URL

同じPayPal.comアカウントとIPNを使用して複数のストアを持つことが可能です。デフォルトの*通知URL*は1つですが、取引時にIPNリスナーURLを送信すると、デフォルトのURLが上書きされます。各取引がPayPal.comに渡される際に、`notify_url`パラメータを2つ目のURLとして設定していれば、この方法は機能します。

PayPal アカウントで自動返品を設定すると、顧客は領収書ページにアクセスできます。

#### 自動返却の設定方法

1. [PayPal.com](https://www.paypal.com/) でPayPalアカウントにログインします。
2. 「設定」（歯車アイコン）>「アカウント設定」>「ウェブサイト決済」>「ウェブサイト設定」に移動します。
3. 「**自動返信**」セクションで「**オン**」を選択し、次のURLを使用します。「example.com」の部分は、ご自身のURLに置き換えてください。https://example.com/checkout/order-received/ この設定に関わらず、正しい領収書ページに動的にリダイレクトされます。
4. オプション：URLの末尾に「?utm_nooverride=1」を追加して、**取引（コンバージョン）がPayPalではなく元のトラフィックソースに計上されるようにします**。

サイトのチェックアウトと支払いのワークフローを設定・調整する際に、PayPalサンドボックスの詳細を使用することで、思う存分取引を行うことができます。

1. [PayPal開発者アカウント](https://developer.paypal.com/) に登録します。
2. 登録してサインインしたら、メニューから **テストツール » サンドボックスアカウント** を選択します。
3. **アカウントの作成** (2) をクリックします。
4. 要件に合わせて **アカウントの種類** と **国/地域** を指定します。

**注:** **国/地域** によってサンドボックス アカウントの通貨が決まります。注文が [支払い保留中](https://woocommerce.com/document/paypal-standard/#section-30) に設定されないようにするには、サイトの通貨と一致させる必要があります。

1. アカウントを作成すると、**アカウント名** 列にメールアドレスが表示されます。このメールアドレスは、サイトの PayPal 標準設定ページの **メール ID** 設定に使用できます。
2. 次に、**アカウントの管理** 列で新しく追加されたアカウントの横にあるドットメニューをクリックし、**アカウントの表示/編集** (3) を選択して、サンドボックスアカウントの詳細を表示します。

1. 開いたページの **NVP/SOAP サンドボックス API 認証情報** セクションに、サイトの設定ページの下部にあるのと同じ設定に一致するサンドボックス アカウントの API 認証情報が表示されます。

注: サンドボックスの **メール ID** は、サイトの **PayPal メール** フィールドと **受信者メール** フィールドの両方に使用する必要があります。これらのフィールドは、*WooCommerce > 設定 > 支払い > PayPal* で確認できます。

代わりに実際のPayPalメールアドレスを使用した場合、注文ステータスは**保留中**と表示され、注文メモには**「支払い保留中（一方的）。注文ステータスが支払い保留から保留に変更されました」**と表示されます。

**API 資格情報** の下で、API 資格情報 (ユーザー名、パスワード、署名) をコピーします。

WooCommerce の PayPal 標準設定の対応するフィールドにそれらを貼り付ける必要があります。

PayPal の Sandbox モードを有効にして WooCommerce ストアから受信した取引を表示するには、PayPal Sandbox Web サイトにログインする必要があります: https://www.sandbox.paypal.com/

ログインしたら、「アクティビティ」タブをクリックして、WooCommerce ストアのすべての取引を表示できます。

お支払いはPayPalウェブサイト上で行われ、チェックアウト画面では行われません。SSL証明書の追加は任意ですが、強くお勧めします。SSLは検索結果のランキング要因となるだけでなく、サイト間で送受信される情報の安全性を確保するため、顧客もSSLを期待しています。無料および低価格のオプションについては、[SSLとHTTPS](https://woocommerce.com/document/ssl-and-https/)をご覧ください。

WooCommerce 5.5.0より前のバージョンでは、PayPal StandardはWooCommerceのコアに含まれており、無料でダウンロードできます。バージョン5.5.0以降では、新規インストール時にPayPal Standardは非表示になります。

PayPalは、お客様のアカウントの種類と販売件数・販売量に応じて取引手数料を請求します。詳しくは、[自分に最適な決済方法は？](https://woocommerce.com/document/premium-payment-gateway-extensions/)をご覧ください。

WooCommerce は料金を請求しません。

顧客がPayPal（WooCommerceストアではなく）で注文を放棄した場合、注文は「保留中（未払い）」と表示されます。特別な対応は必要ありません。

[在庫保留時間](https://woocommerce.com/document/configuring-woocommerce-settings/?_ga=1.71460115.1609298669.1480324044#inventory-options)に達すると、注文は自動的にキャンセルされます。

PayPal ゲートウェイは、次の場合を除き、個々の明細項目 (製品名、価格、数量) を PayPal に渡します。

- 価格は税込みで設定されています
- 送料を含め、項目数が **9** を超えています。PayPal では 9 項目までしかサポートされていません。

これは、端数処理の誤差を防ぎ、正確な合計金額が請求されるようにするためです。明細項目が送信されない場合、項目はグループ化され、「注文番号x」という名前が付けられます。

WooCommerce 2.6以降では、PayPal API経由で送料を「実際の」配送明細項目として送信します。PayPalアカウントに配送ルールが設定されている場合は、それらのルールが適用され、WooCommerceが送信する送料は削除されます。

解決するには、PayPal アカウントに設定されているすべての配送ルールを削除するか、[ここで説明されている方法](https://www.paypal-community.com/t5/How-to-use-PayPal-Archive/Turning-off-shipping-calculator/td-p/40601) を使用して無効にする必要があります。

この場合、PayPal IPN が失敗しています。サーバーを確認し、以下の [IPN の問題のデバッグ](https://woocommerce.com/document/paypal-standard/#debugging-ipn-issues) セクションをご覧ください。

購入ボタンを押した後に次のエラー メッセージが表示される場合、PayPal 設定で入力したメール アドレスが正しくありません。

WooCommerceは「請求書」システムを採用しています。「重複する請求書をブロックする」設定があります。2つのウェブサイトで請求書を使用している場合、請求書番号が重複するのは避けられません。PayPalでこの設定を解除すれば、請求書に問題は発生しません。WooCommerceのPayPal設定で、請求書のプレフィックスがウェブサイトごとに異なっていることをご確認ください。

または、重複請求書のチェックを無効にするには、PayPal アカウントにログインし、「プロフィール」>「プロフィールと設定」>「販売設定」>「支払いをブロック」または「支払い受取設定」に移動して、「**誤った支払いをブロック**」を「**いいえ**」に設定します。

顧客がアカウントを作成せずにチェックアウトできるオプションがありますが、まず PayPal アカウントで有効にする必要があります。

ログインしたら、右上の歯車アイコンを選択して「マイプロフィール」ページに移動します。次に「商品とサービス」セクションに移動し、「ウェブサイトの設定」を選択します。そこで、「PayPalアカウントオプション」オプションをオンにします。詳しくは、[PayPalのウェブサイト](https://www.paypal.com/webapps/mpp/account-optional)をご覧ください。

配送先住所を使用する場合は「はい」、請求先住所（デフォルト）を使用する場合は「いいえ」です。PayPal APIは複数の住所を認識しません。

「*販売者は暗号化されていない支払い方法のみを受け付けます*」というメッセージは PayPal から送信されたものです。

このエラーは、PayPalアカウントプロフィールで「暗号化された」ボタンからの支払いのみを受け入れるように設定されているにもかかわらず、商品ボタンのコードが「暗号化されていない」場合に表示されます。これにより支払いプロセスが中断され、エラーメッセージが表示されます。

**このオプションをオフにするには:**

1. PayPalアカウントに**ログイン**します。
2. 「プロフィール」タブまたは「プロフィール編集」リンクを**選択**します。
3. 「販売設定」で、「ウェブサイト決済設定」を**選択**します。
4. 「暗号化されたウェブサイト決済」セクションで、「オフ」を**選択**します。
5. 変更を**保存**します。

複数のストアを運営している場合や PayPal アカウントを他の用途に使用している場合、WooCommerce の注文番号は一意ではない可能性があります。

この問題を回避するには、WooCommerce > 設定 > チェックアウト > PayPal に移動し、ストアに固有の「プレフィックス」を設定します（例：MYSTORE-）。

[WooCommerce Subscriptions](https://woocommerce.com/products/woocommerce-subscriptions/) で PayPal Standard を使用するには:

- [API認証情報](https://woocommerce.com/document/paypal-standard/#section-4)を追加します。
- [PayPal IPN URL](https://woocommerce.com/document/paypal-standard/#section-6)を設定します。
- **サブスクリプションにPayPal Standardを有効にする** チェックボックスをオンにします。

前述のとおり、支払いを受け取ったとき、払い戻しやチャージバック、キャンセルを発行したときに、PayPal から即時支払い通知 (IPN) が送信されます。

IPN が注文情報を更新しない場合は、以下の手順を実行できます。これらの問題に対処する際には、保留中（未払い）の注文が自動的にキャンセルされないようにし、IPN を使わずに手動で支払いを確認できるようにすることをお勧めします。これを行うには、WooCommerce > 設定 > 商品 > 在庫に移動し、「在庫保持時間（分）」オプションを「なし」（フィールドを空のまま）に設定してください。

また、PayPal アカウントにログイン後、IPN の配信に関する詳細情報を IPN 履歴ページで確認することもできます: [https://www.paypal.com/us/cgi-bin/webscr?cmd=_display-ipns-history](https://www.paypal.com/us/cgi-bin/webscr?cmd=_display-ipns-history)

### ローカルでテストしていますか?

MAMPなどローカルでテストしている場合、PayPalはストアと通信できません。これは正常な動作です。ウェブ上でホストすれば問題なく動作します。

ゲートウェイはPayPalと通信して通知の有効性を確認する必要があります。そのためにはfsockopenのサポートが必要です。使用する関数は[https://codex.wordpress.org/Function_API/wp_remote_post](https://developer.wordpress.org/reference/functions/wp_remote_post/)です。

*これがサーバーでサポートされているかどうかを確認するには、**WooCommerce > システム ステータス** に移動して結果を確認します。

ゲートウェイはhttps URL経由でPayPalと通信します。ファイアウォールで送信ポート443が開いている必要があります。

設定でログを有効にした後、レスポンスが受信されているか確認してください。レスポンスが受信されていない場合は、WordPressのインストールまたはプラグインの競合が原因である可能性があります。他のプラグインを無効にしてください。

PayPalゲートウェイ設定のメールアドレスが、IPNから返されたメールアドレスと一致していることを確認してください。PayPalアカウントのメインメールアドレスを使用してください。一致している必要があります。

これを行わない場合、IPN 応答は拒否されます。その結果、注文が保留状態のままになったり、完了しなかったりする可能性があります。

**「支払い保留中（一方的）。注文ステータスが支払い保留から保留に変更されました」**

一方的とは、受取人が既存のPayPalアカウントを持っていないことを意味します。受取人のメールアドレスは、そのメールアドレスでPayPalアカウントを作成するか、既存のPayPalアカウントにそのメールアドレスを追加することで、取引が完了します。メールアドレスの確認も必要です。

注文が完了しても注文ステータスが変わらない場合は、W3 Total Cache との競合がないか確認してください。

### PayPal サンドボックスモードでの通貨

PayPal がサンドボックス モードにあり、サンドボックス通貨以外の通貨で支払いが行われる場合:

- PayPalで支払いが未請求状態であり、
- WooCommerceで注文が保留状態である。

PayPal で支払いを承認すると、注文ステータスが「処理中」に変わります。

PayPal で手動で支払いを受け入れる必要がないようにするには、PayPal サンドボックスで設定した通貨が WooCommerce ストアの通貨と同じであることを確認してください。

これは、IPNがウェブサイトで正しく機能していないことを示している可能性があります。回避策として、Payment Data Transfer（PDT）を有効にすることが考えられます。PayPalアカウント設定で、以下の設定をお試しください。

設定を保存したら、Web サイト設定ページに戻り、PDT アイデンティティ トークンを見つけます。

PDT アイデンティティ トークンをコピーしたら、**WooCommerce > 設定 > チェックアウト > PayPal** フィールドに貼り付けることができます。

ご利用のホストにご連絡ください。一部のホストではIPNに問題が発生することが知られていますが、残念ながらこれは弊社では制御できません。PayPalからの応答が、キャッシュ、ファイアウォール、その他のサーバー上の設定によってブロックされていないことを確認してください。

