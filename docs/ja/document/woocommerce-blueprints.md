---
title: WooCommerce ブループリント
url: https://woocommerce.com/document/woocommerce-blueprints/
---

**WooCommerce Blueprints** は、**WooCommerce 9.9** で導入された機能で、ストア設定のセットアップ、管理、テストを効率化します。複数のストアを立ち上げる場合でも、チームで共同作業する場合でも、新しい拡張機能を検証する場合でも、Blueprints を使用すると、ストアの設定、プラグイン、テーマを数回クリックするだけでインポートおよびエクスポートできます。Blueprints を使用すると、次のことが可能になります。

- 事前設定されたストア設定を再利用することで時間を節約します。
- チーム間および環境間の一貫性を確保します。
- 新しい機能や設定を安全かつ効率的にテストします。

**ブループリント**は、WooCommerceストアの設定をキャプチャしたポータブルな設定ファイルです。WooCommerceの設定、有効なプラグイン、テーマなどを含めることができます。これにより、ストア環境を簡単に再現したり、チームメンバーと設定を共有したり、好みの設定で新しいストアを迅速に立ち上げたりすることができます。

ブループリントは [WordPress Playground ブループリント形式](https://developer.wordpress.org/playground/blueprints/) を使用するため、移植性が高く、さまざまな WordPress ツールと互換性があります。

ストアでブループリントを有効にするには:

1. **WooCommerce > 設定 > 詳細設定** **> 機能** に進みます。
2. **Blueprint** オプションまで下にスクロールします。
3. Blueprint を有効にするには、**Blueprint (beta)** チェックボックスをオンにします。
4. **変更を保存** を選択します。

有効にすると、**WooCommerce > 設定 > 詳細 > ブループリント** の下に新しい **ブループリント** オプションが表示されます。

ブループリントをエクスポートすると、現在のストア設定を `.json` ファイルに保存し、再利用したり、別の WooCommerce サイトにインポートしたりできます。WooCommerce ストアのブループリントをエクスポートするには、以下の手順に従ってください。

1. **WooCommerce > 設定 > 詳細設定 > ブループリント** に移動します。
2. **エクスポート** セクションまで下にスクロールします。
3. エクスポートに含める内容を選択します。
4. 設定が完了したら、**エクスポート** を選択してブループリントファイルを生成し、ダウンロードします。

エクスポートする WooCommerce 設定として次のものを選択できます。

- 一般
- 商品
- 税金
- 配送
- お支払い
- アカウントとプライバシー
- 連携
- サイトの公開設定
- 詳細設定

ブループリントのエクスポートプロセスはWooCommerce設定APIに依存しているため、このAPIを通じて登録された設定のみがエクスポート対象となります。承認済みダウンロードディレクトリやレガシーコードによって作成されたREST APIキーなどに使用されるカスタムデータベーステーブルはエクスポート対象となりません。

さらに、支払いアカウントの設定はエクスポートもインポートもされないため、ユーザーはインポート後に支払いアカウントを手動で接続/設定する必要があります。

現在、[WordPress.org](http://wordpress.org/) で利用可能なプラグインとテーマのみをサポートしています。しかし、この機能を使えば、ブループリントのエクスポートに含めるプラグインと拡張機能を選択できます。

ブループリント ファイルをインポートすると、以前に保存したストア構成を新規または既存の WooCommerce サイトに適用できます。

1. **WooCommerce > 設定 > 詳細設定 > ブループリント** に移動します。
2. **インポート** セクションまで下にスクロールします。
3. ブループリントファイルをアップロードします。
4. **インポート** ボタンをクリックします。

**インポートは近日公開モードに制限されています**

ブループリントのインポートは、ストアが近日公開モードの場合にのみ許可されます。これは、本番環境での誤ったインポートや不正なインポートのリスクを軽減するためです。これは、本番環境での破壊的な設定変更を防ぐための安全策として機能します。ローカルで開発している場合、またはこの制限をオーバーライドする必要がある場合（例：ステージング／テスト目的）は、wp-config.php ファイルで定数 `define( 'ALLOW_BLUEPRINT_IMPORT_IN_LIVE_MODE', true );` を定義することで、本番環境でのインポートを許可できます。

- 共通のテーマとプラグインセットを使用して、すべての新規ストアにスターター設定を素早く適用できます。
- 開発環境またはステージング環境間でストア設定とプラグイン設定を同期することで、一貫性を確保できます。
- ブループリントファイルコレクションを使用して、WooCommerce拡張機能をさまざまな環境とストア設定でテストできます。
- 新しい市場でのローンチ時や新機能/拡張機能のテスト時に、ストアの設定を簡単に複製できます。

ブループリントの安全性と信頼性を確保するために、徹底したセキュリティ監査を実施し、機能とその基盤となるインフラストラクチャの両方にわたっていくつかの保護を実装しました。

- **厳格なスキーマ検証**：すべてのブループリントファイルは、適用前に厳格なJSONスキーマに基づいて検証されます。このスキーマにより、予期しないフィールドが拒否され、可能な限り厳密な型指定が強制されます。
- **すべてのステップで権限チェックが実行されます**：ブループリントのインポートまたはエクスポートは、承認されたユーザーのみが行えます。すべてのREST APIエンドポイントとバックグラウンドプロセスには、不正アクセスを防ぐための権限チェックが含まれています。
- オプション制限：リスクを軽減するため、ブループリントのインポートでは、機密性の高い、またはリスクの高いWordPressオプションの更新をブロックするブラックリストが適用されます。例：
- サイトURL（siteurl、home）
- ユーザー管理およびシステム関連の設定
  

これにより、重要なオプションが意図せずまたは悪意を持って上書きされることを防ぎながら、ほとんどのサイト構成を移植可能にすることができます。

- SQL実行の安全性強化：ブループリントは、インポートプロセスの一環としてSQLの変更を適用できます。安全性を確保するため、特定のクエリタイプ（INSERT、UPDATE、REPLACE INTO）のみが許可され、各クエリは実行前に慎重に検証されます。保護対策には以下が含まれます。
- 認識されない、または安全でないSQLコマンドをブロック
- SQLインジェクションパターンを検出
- 保護されたテーブルへの書き込みを防止
  

これらの保護はインポートの実行時に適用され、安全でない、または予期しないデータベースの変更のリスクを軽減します。

- **監査ログ**: ブループリントのインポートおよびエクスポート操作は、追跡可能性のためにログに記録されます。ログは**WooCommerce > ステータス > ログ**で確認できます。`wc-blueprint`というソース列でログを確認してください。

⚠️ **セキュリティのベストプラクティス:**安全対策を講じていても、特にサードパーティ製のブループリントファイルは、インポート前に必ず確認することをお勧めします。コンテンツが期待どおりに表示されていることを確認し、完全に信頼できない変更は適用しないでください。

