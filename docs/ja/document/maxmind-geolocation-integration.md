---
title: MaxMind 地理位置情報統合
url: https://woocommerce.com/document/maxmind-geolocation-integration/
---

無料のWooCommerceコアプラグインを使用すると、ストアオーナーは顧客の位置情報を自動的に取得し、その地域に応じた税率と配送方法を表示できます。この情報を取得するために、WooCommerceは[MaxMind GeoLite2](https://dev.maxmin.com/geoip/geoip2/geolite2/)の位置情報データと統合されています。

このドキュメントでは以下について説明します。

- 位置情報の有効化
- MaxMind アカウントの作成
- MaxMind ライセンスキーの生成
- MaxMind ライセンスキーのサイトへの追加
- WooCommerce サイトが MaxMind の位置情報データベースを更新する方法

MaxMind の地理位置情報統合を有効にするには:

1. サイトのWP管理ダッシュボードで、*WooCommerce > 設定 > 一般*に移動します。
2. **一般オプション**セクションまで下にスクロールします。
3. *デフォルトの顧客所在地*ドロップダウンから、**Geolocate**または**Geolocate（ページキャッシュサポート付き）**を選択します。

ジオロケーションを有効にしたら、MaxMindアカウントを作成し、*WooCommerce > 設定*の**統合**タブでMaxMindを設定する必要があります。**ジオロケーション（ページキャッシュサポート付き）**オプションを選択した場合、サイトのURLに「?v=$hash」クエリ文字列が追加されます。たとえば、URLは「https://woocommerce.com/?v=bc74b2d76824」のようになります。このオプションを選択すると、WooCommerceはユーザーのIPアドレスのハッシュをURLに追加し、ページをキャッシュして再利用できるようにします。これにより、顧客がストア内を移動する際に、場所固有のデータ（税率や配送情報など）をキャッシュできるようになります。

これらのクエリ文字列が追加されないようにするには、代わりに Geolocate オプションを選択します。

1. MaxMindの[GeoLite2サインアップページ](https://www.maxmind.com/en/geolite2/signup)にアクセスしてください。
2. 登録フォームに必要事項を入力してください。*業種*と*利用目的*の欄でどちらを選択すればよいか分からない場合は、それぞれ**eコマースプラットフォーム**と**コンテンツのカスタマイズ**を選択してください。
3. フォームの送信が完了すると、パスワード設定用のリンクが記載されたメールが届きます。リンクをクリックして、安全なパスワードを設定してください。

MaxMind アカウントが作成されたので、ライセンス キーを作成できます。

1. MaxMind にログインし、[https://www.maxmind.com/en/account](https://www.maxmind.com/en/account) にアクセスします。
2. ユーザーアカウントダッシュボードで [**ライセンスキーの管理**] タブをクリックします。
3. [**新しいライセンスキーの生成**] ボタンをクリックします。
4. 次に、フォームに入力してライセンスキーを生成します。
5. 説明を追加します（ストア名など）。
6. [**確認**] ボタンを選択します。
7. 新しいライセンスキーが表示されます。**このキーは一度しか表示されないため、すぐにコピーして安全な場所に保存してください。**

**注記：**

MaxMind で生成できるライセンス キーは最大 25 個までですが、同じライセンスを複数のサイトで使用できます。

最後に、ストアの WooCommerce 設定にライセンス キーを追加する必要があります。

1. WP Adminダッシュボードで、*WooCommerce > 設定 > 統合 > MaxMind Geolocation* に移動します。
2. ライセンスキーを *MaxMind ライセンスキー* フィールドに貼り付けます。
3. **変更を保存** ボタンをクリックします。

WooCommerce ストアでは、MaxMind を使用して顧客の位置情報を特定できるようになりました。

- システムは15日ごとに自動更新され、WordPress に組み込まれた WP-Cron を使用して `woocommerce_geoip_updater` が実行されます。
- この期間を過ぎてもサーバー上の MaxMind データベースファイルが正しく更新されない場合は、サードパーティ製の [WP Crontrol](https://wordpress.org/plugins/wp-crontrol/) プラグインをインストールして、WordPress でスケジュールされた cron イベントのトラブルシューティングを行うことができます。
- このプラグインをインストールして有効化したら、**[ツール] > [Cron イベント]** に移動して、このイベントの次回スケジュール時刻を確認するか、手動で実行することができます。

まだ質問があり、サポートが必要ですか?

このドキュメントは、無料の[コア WooCommerce プラグイン](https://wordpress.org/plugins/woocommerce/)に関するものです。このプラグインのサポートは、[WordPress.org のコミュニティフォーラム](https://wordpress.org/support/plugin/woocommerce) で提供されています。このフォーラムを検索すると、同じ質問が過去に投稿され、回答されているケースがよくあります。フォーラムを利用するための WordPress.org アカウントをまだ作成していない場合は、[作成方法はこちら](https://make.wordpress.org/contribute/join/)をご覧ください。

- ここで紹介したコア機能を**拡張**したい場合は、[WooCommerce マーケットプレイス](https://woocommerce.com/products/)で利用可能な拡張機能をご確認ください。
- 継続的な高度なサポートや WooCommerce 向けの**カスタマイズ**が必要ですか？[Woo エージェンシー パートナー](https://woocommerce.com/customizations/)をご活用ください。
- 独自の WooCommerce 統合機能や拡張機能を開発している**開発者**ですか？[開発者向けリソース](https://developer.woocommerce.com/)をご確認ください。

必要な情報が見つからない場合は、下のフィードバック サムを使用してお知らせください。

