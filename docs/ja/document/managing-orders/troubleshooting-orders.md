---
title: 注文のトラブルシューティング
url: https://woocommerce.com/document/managing-orders/troubleshooting-orders/
---

WooCommerce における注文関連のトラブル（支払いの保留、在庫管理の不備、注文ステータスの誤りなど）は、ストアの機能と顧客体験に支障をきたす可能性があります。このガイドでは、トラブルシューティングのプロセスを簡素化し、「処理中」または「保留中」ステータスで注文が滞留している、注文が重複している、在庫に不一致があるといったよくある問題を特定するのに役立ちます。

注文ステータスについて詳しくない場合は、注文プロセスの各段階で予想される注文ステータスに関する詳細情報が記載されている専用ページである[注文ステータスのドキュメント](https://woocommerce.com/document/managing-orders/order-statuses/)を確認してください。

通常、注文ステータスに関する問題のトラブルシューティングを行う際に最初に確認する必要があることの一つは、使用された支払い方法とゲートウェイです。この情報は通常、2つの場所のいずれかで確認できます。

**一般的な注文の詳細** セクションで、注文番号に続いて次の内容を記入します。

上記のスクリーンショットでは、注文画面にクレジットカードでのお支払いと取引IDが表示されています。場合によっては、使用された決済ゲートウェイが、注文詳細の上部に、使用された決済方法と並んで表示されることがあります。必ずしもそうとは限りませんので、以下の**注文メモ**でこの情報を確認する方法を説明します。

注文ステータスが自動的に更新されない場合は、想定内の動作、設定の問題、あるいは全く別の原因が考えられます。最も一般的な原因を見ていきましょう。

#### 処理中のままになっている注文

注文ステータスが「**処理中**」の場合、お支払いが正常に完了し、注文処理の準備が整ったことを意味します。注文のステータスが「**処理中**」から「**完了**」に自動的に変更されることはありません。ストア管理者は注文処理の責任を負い、商品の発送後、注文ステータスを手動で「**完了**」に更新する必要があります。すべての商品が[仮想商品かつダウンロード可能](https://woocommerce.com/document/managing-products/virtual-downloadable/)である場合を除き、すべての注文は処理が必要です。

#### 注文が保留状態のままになっています

注文が行われ、支払いを受け取ったにもかかわらず、注文のステータスが**保留中**から**処理中**に自動的に変更されない場合は、[注文ステータス表](https://woocommerce.com/document/managing-orders/order-statuses/#order-statuses-in-woocommerce)に記載されている次のいずれかのシナリオが原因である可能性があります。

##### オフライン支払い方法

[直接銀行振込（BACS）](https://woocommerce.com/document/bacs/)などの「オフライン」決済方法で支払われた注文は、即時に支払い確認が行われないため、注文は保留状態のままとなります。オフライン決済方法では、支払いが処理されたことを手動で確認する必要があります。支払いの受領を確認した後、注文のステータスを変更できます。

##### 遅延通知支払い方法

SEPA口座振替などの遅延通知決済方法でご注文いただいた場合、ご注文は一時的に**保留**ステータスのままとなります。サイトでご利用の決済ゲートウェイによっては、お支払いが完了すると、ご注文が自動的に**保留**ステータスから別のステータスに変更される場合があります。詳細は、ご注文の注文メモと決済ゲートウェイのドキュメントをご確認ください。

##### 承認とキャプチャ

決済ゲートウェイが、請求の承認だけでなく、**承認とキャプチャ**の両方を行うように設定されていることを確認してください。承認とは資金を保留する処理で、店舗オーナーは実際に送金される前に、手動で請求額を「キャプチャ」する必要があります。承認とキャプチャの方がはるかに一般的で、顧客から決済ゲートウェイへ即座に資金を送金するワンステップのプロセスです。この設定になっているかどうかを確認するには、注文メモを確認し、支払いが承認されているもののキャプチャされていないことを確認してください。

この設定の詳細については、ご利用の決済ゲートウェイのドキュメントをご覧ください。以下に、一般的な決済ゲートウェイにおける承認とキャプチャの設定に関する詳細を記載します。

- [WooPayments](https://woocommerce.com/document/woopayments/settings-guide/authorize-and-capture/)
- [Stripe](https://woocommerce.com/document/stripe/admin-experience/authorize-and-capture/)
- [Square](https://woocommerce.com/document/woocommerce-square/payment-settings/#payment-settings)
- [PayPal Payments](https://woocommerce.com/document/woocommerce-paypal-payments/#general-settings)

##### 注文メモ

注文メモには、残高不足、カードの有効期限切れ、認証失敗、ゲートウェイのタイムアウトなど、具体的な問題が記載されている場合があります。エラーコード、拒否理由、または決済ゲートウェイからのステータス更新を含むエントリを探してください。これらのメッセージは通常、決済プロセス中に各イベントが発生した時刻を示すタイムスタンプとともに表示されます。

##### ログ

注文メモに有用な情報や洞察につながる情報が見つからない場合は、WooCommerce のログでエラーや、決済ゲートウェイとストア間の通信に関する問題の手がかりがないか確認してください。決済ゲートウェイの設定でログ記録が有効になっている場合は、**WooCommerce > ステータス > ログ** でログを確認できます。注文が行われた日に、影響を受けた注文で使用された決済ゲートウェイのログを探してください。ログ記録が有効になると、システムは**新しい取引**のみをキャプチャすることに注意してください。つまり、ログを生成するにはテスト注文を行う必要がある場合があります。開始されたが完了していない決済のログが見つかった場合、最初のリクエスト後にプロセスが中断されたか、サイレントに失敗した可能性があります。これに該当する場合は、決済ゲートウェイのサポートに連絡するか、WooCommerce が開発した決済ゲートウェイの場合は[サポートに問い合わせ](https://woocommerce.com/my-account/contact-support/)ください。

WooCommerce の注文ステータス「支払い保留中」は、注文は受領されたものの、支払いがまだ確認されていないことを示します。[直接銀行振込 (BACS)](https://woocommerce.com/document/bacs/) や[小切手支払い](https://woocommerce.com/document/cheque/) などの一部の決済ゲートウェイでは、注文を「処理中」または「完了」ステータスに移行する前に、ストアオーナーが支払いの受領を手動で確認する必要があります。

ただし、ほとんどの決済ゲートウェイでは、お支払いが完了すると注文ステータスが自動的に「処理中」に更新されます。自動的に更新されない場合は、以下の点をご確認ください。

注：現在廃止され、デフォルトで非表示となっているPayPal Standard機能をまだ使用していて、支払い完了後も注文が「支払い保留中」ステータスのままになっている場合は、IPNの問題が発生している可能性があります。[IPNの問題のデバッグ](https://woocommerce.com/document/paypal-standard/#debugging-ipn-issues)のトラブルシューティングセクションをご覧ください。

##### 注文メモを確認する

決済ゲートウェイからのメッセージは注文メモに表示されることが多く、残高不足、カードの有効期限切れ、認証失敗、ゲートウェイのタイムアウトといった具体的な問題が明らかになることがあります。エラーコード、拒否理由、または決済ゲートウェイからのステータス更新を含むエントリを探してください。これらのメッセージは通常、決済プロセス中に各イベントが発生した時刻を示すタイムスタンプとともに表示されます。

**注文メモがない場合:**

支払い試行に関連する注文メモが表示されない場合、それ自体が潜在的な問題を示しています。メモが表示されない場合、多くの場合、決済ゲートウェイがWooCommerceと正常に通信できなかったか、決済プロセスが完了前に中断されたことが考えられます。注文メモが表示されない場合は、決済ゲートウェイが正しく設定されていることを確認してください。決済ゲートウェイの設定でデバッグログが有効になっている場合は、ログを確認し、何か手がかりとなる情報がないか確認してください。

##### Webhook を確認する

Webhookは、支払い状況の変化をリアルタイム通知システムとして利用することで、決済ゲートウェイがWooCommerceストアに即座に通知を送信できるようにします。決済ゲートウェイによっては、Webhookを手動で設定する必要があるものもあれば、バックグラウンドで自動的に処理するものもあります。

Webhookの手動設定が必要な決済ゲートウェイの一例として、[Stripe for WooCommerce](https://woocommerce.com/products/stripe/)が挙げられます。[Stripe for WooCommerce](https://woocommerce.com/products/stripe/)をご利用で、支払い処理が保留になっている場合は、[Webhookの再設定](https://woocommerce.com/document/stripe/setup-and-configuration/stripe-webhooks/#reconfiguring)をご検討ください。

WooCommerceストアで重複注文が見られる場合、調査すべき原因がいくつか考えられます。それぞれのポイントについて詳しく説明します。

##### 顧客とのコミュニケーション:

重複注文の疑いがある場合は、顧客に連絡して注文の意図を確認してください。複数の注文を意図していたかどうかを尋ねてください。多くの場合、重複注文のように見えるのは、顧客が2度目に購入した結果です。

##### ブラウザ/ネットワークの問題:

お客様が取引の完了を待っている間に誤って「注文する」ボタンをダブルクリックしたり、チェックアウトページを更新したりすると、注文が重複することがあります。これにより、複数の注文試行が発生し、同じ商品が複数回購入される可能性があります。お客様に、チェックアウトページを更新したり「注文する」ボタンを複数回クリックしたりする原因となった遅延やエラーが発生したかどうかをお尋ねすることをお勧めします。

##### 注文番号の確認:

重複が疑われる注文は、全く同じ注文番号を持っていますか？注文番号が重複していない場合は、お客様が別々に正当な注文を行った可能性があります。特に最初の注文に商品を追加するのを忘れた場合、お客様が複数の購入を行うことは珍しくありません。

##### 注文書の検査:

重複が疑われる注文については、それぞれの注文メモを徹底的に確認してください。顧客情報、支払い方法、データ内の矛盾点や類似点といった情報を比較することで、手がかりが得られる可能性があります。特に、決済ゲートウェイ固有のメモが含まれている場合は、特に注意してください。両方の注文で支払いが同時に完了している場合（または、非常に短い間隔で完了している場合）、実際にはエラーが発生し、2つ目の注文は正当なものではない可能性があります。

##### ステージングサイトの影響:

WooCommerceサイトの[ステージングまたは開発](https://woocommerce.com/posts/what-is-staging-site-wordpress-how-to-set-one-up/)バージョンを運用している場合は、ステージングサイトを本番環境から完全に分離してください。ステージングサイトの設定が不適切だと、本番環境の注文が誤って処理され、重複注文が発生してしまう可能性があります。特に、定期的な注文をスケジュールに従って自動的に作成する拡張機能を使用している場合は、ステージングサイトで発生する可能性のある問題にご注意ください。

##### 決済ゲートウェイダッシュボードのレビュー:

決済ゲートウェイのダッシュボードにログインしてください。重複している可能性のある注文に対応する取引を見つけてください。取引が2つある場合、特にWooCommerceでも取引が2つ表示されている場合は、顧客が同じ購入を2回行っている可能性があります。ゲートウェイに取引が1つしか表示されていない場合は、WooCommerceでさらにトラブルシューティングを行う必要があります。

##### 最近の変更の監査:

重複注文の問題が最近発生した場合は、ストアに最近行った変更を検討してください。これには、プラグインのインストール、アップデート、ゲートウェイの設定、テーマの変更などが含まれます。最近の変更を元に戻すことで、問題が解決するか、問題の原因が明らかになる可能性があります。

##### サーバーおよびホスティングの評価:

サーバーの応答時間が遅い場合やホスティングの問題により、注文が重複する可能性があります。お客様がチェックアウト時に遅延を経験すると、注文フォームを複数回再送信してしまう可能性があります。ホスティングプロバイダーにお問い合わせいただき、サーバーのパフォーマンスを調査し、サービスに既知の問題がないかご確認ください。環境が適切に設定されていることを確認するには、[WooCommerce サーバーの推奨事項](https://woocommerce.com/document/server-requirements/)をご参照ください。

##### ログレビュー:

WooCommerceのログで、重複したWebhookの呼び出しや応答がないか確認してください。決済ゲートウェイの設定でログ記録が有効になっている場合は、**WooCommerce > ステータス > ログ**でログを確認できます。影響を受けた注文で使用された決済ゲートウェイの、注文が行われた日のログを確認してください。

##### プラグイン競合診断:

プラグインの競合は、予期せぬ動作のよくある原因です。ローカルサイトやステージングサイトなどのテスト環境で問題を再現できる場合は、WooCommerceと有効な決済ゲートウェイを除くすべてのプラグインを一時的に無効化してください。注文の確定をテストしてください。重複がなくなったら、各プラグインを1つずつ再有効化し、有効化するたびにテストを行って原因を特定してください。詳しくは、[WooCommerceプラグイン競合テストガイド](https://woocommerce.com/document/how-to-test-for-conflicts/)をご覧ください。

WooCommerceは、お客様がストアで商品を購入すると、自動的に商品在庫を追跡・更新します。このシステムが正しく機能している場合、チェックアウトプロセス中に在庫レベルが削減され、商品カタログ全体の正確な在庫数が維持されます。

過剰販売を防ぐには、在庫を注意深く管理することが重要です。商品管理画面と商品設定で在庫管理オプションをオンにすることで、在庫管理が可能になります。これにより、オンラインに表示される在庫数と実際の在庫数が一致するようになります。

WooCommerce で在庫管理が有効になっていることを確認するには、**WooCommerce > 設定 > 製品 > 在庫** に移動してください。

1. 「在庫管理を有効にする」が**チェックされている**
2. 「在庫を保管」の期間が適切に設定されている（推奨：60分）

詳細については、[製品設定：在庫](https://woocommerce.com/document/configuring-woocommerce-settings/products/#inventory)を参照してください。

WooCommerceのグローバル設定と個々の商品設定の両方で在庫管理が有効になっていない場合、注文後にWooCommerceが在庫を減らさない可能性があります。両方の設定で在庫管理が有効になっていることを確認してください。どちらかの設定が無効になっている場合、注文時に自動在庫削減は行われません。

#### シンプルな製品

これらの手順に従うことで、WooCommerce でシンプルな製品の在庫を正常に追加および管理できるようになります。

1. **商品に移動**します。
2. 編集する商品を**選択**します。
3. **商品データセクションに移動**します。
4. **この商品の在庫数を追跡**するを有効にします。

1. 在庫の**数量**を設定します。

注: 現在在庫切れの商品でも顧客が注文できるようにするには、ドロップダウン オプションから [バックオーダーを許可する] を選択できます。

#### 可変製品

変動製品の在庫は、製品レベル、バリエーション レベル、またはその両方の組み合わせで管理できます。

- 製品レベルの在庫管理
- バリエーションレベルの在庫管理
- 在庫管理システムの組み合わせ：バリエーションレベル + 製品レベルの管理

詳細については、[可変製品の在庫管理](https://woocommerce.com/document/variable-product/#inventory-management)を参照してください。

#### 在庫表示が正しくありません

顧客がウェブサイトで在庫を表示できない場合は、**WooCommerce > 設定 > 製品 > 在庫** の WooCommerce 設定で在庫の表示形式を確認してください。

在庫数の表示方法について以下のいずれかのオプションを選択するか、表示しないことを選択します。

- 常に在庫数を表示します（「在庫 12 個」）。
- 在庫が少なくなった場合のみ表示します（「在庫あり」ではなく「残り 2 個」）。
- 数量は表示しません。

これに関する追加情報および関連する考慮事項については、[製品設定: 在庫](https://woocommerce.com/document/configuring-woocommerce-settings/products/#inventory) を参照してください。

すべての注文には固有の注文IDが付与されますが、必ずしも連番になるわけではありません。注文番号が連番にならないのは、wp_postデータベーステーブルを共有しているためです。このデータベーステーブルは、WordPressの他の投稿タイプ（ページ、ブログ投稿、コメント、製品レビュー、クーポンなど）と共有されています。新しい投稿が作成されるたびに、データベーステーブルで使用されるID番号が1ずつ増加します。そのため、注文の間に他の投稿タイプのアイテムが作成された場合、注文IDは、他の投稿で使用されているIDを「スキップ」します。

注文に連番の注文番号を割り当てるには、[Sequential Order Numbers Pro](https://woocommerce.com/es/products/sequential-order-numbers-pro/) などの拡張機能を使用できます。

まだ質問があり、サポートが必要ですか?

このドキュメントは、無料の[コア WooCommerce プラグイン](https://wordpress.org/plugins/woocommerce/)に関するものです。このプラグインのサポートは、[WordPress.org のコミュニティフォーラム](https://wordpress.org/support/plugin/woocommerce) で提供されています。このフォーラムを検索すると、同じ質問が過去に投稿され、回答されているケースがよくあります。フォーラムを利用するための WordPress.org アカウントをまだ作成していない場合は、[作成方法はこちら](https://make.wordpress.org/contribute/join/)をご覧ください。

- ここで紹介したコア機能を**拡張**したい場合は、[WooCommerce マーケットプレイス](https://woocommerce.com/products/)で利用可能な拡張機能をご確認ください。
- 継続的な高度なサポートや WooCommerce 向けの**カスタマイズ**が必要ですか？[Woo エージェンシー パートナー](https://woocommerce.com/customizations/)をご活用ください。
- 独自の WooCommerce 統合機能や拡張機能を開発している**開発者**ですか？[開発者向けリソース](https://developer.woocommerce.com/)をご確認ください。

必要な情報が見つからない場合は、下のフィードバック サムを使用してお知らせください。

